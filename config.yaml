tabs:
  - Simulation
  - Domain
  - ABL
  - Refinement
  - IO
  - Junk

frames:
  - name:  frame_time
    tab:   Simulation
    row:   0
    title: Time control

  # ==== Domain frames ==== 
  - name:  frame_Mesh
    tab:   Domain
    #row:   0
    title: Domain and Mesh
    
  - name:  frame_BC
    tab:   Domain
    title: Boundary conditions

  - name:  frame_xBC
    tab:   Domain
    title: X Boundary conditions

  - name:  frame_yBC
    tab:   Domain
    title: Y Boundary conditions

  - name:  frame_zBC
    tab:   Domain
    title: Z Boundary conditions

  # ==== ABL frames ==== 
  - name:  frame_ABLforcing
    tab:   ABL
    row:   1
    title: ABL forcing
  - name:  frame_ABL
    tab:   ABL
    row:   2
    title: ABL physics
  - name:  frame_Coriolis
    tab:   ABL
    row:   3
    title: Coriolis forces
  - name:  frame_Boussinesq
    tab:   ABL
    row:   4
    title: Boussinesq forces

predefinedlists:
  # Check amr-wind/incflo_enums.H
  bctypes: &bctypes [pressure_inflow, pressure_outflow, mass_inflow, zero_gradient,  no_slip_wall, slip_wall, wall_model, fixed_gradient,]
#[no_slip, slip_wall, wall_model ]

inputwidgets:
  # ========== Simulation inputs ==============================
  - name:       stop_time
    label:      Max time
    frame:      frame_time
    inputtype:  float
    defaultval: 100.0
    outputdef:
      AMR-Wind: time.stop_time

  - name:       max_step
    label:      Max steps
    frame:      frame_time
    inputtype:  int
    defaultval: -1
    outputdef:
      AMR-Wind: time.max_step

  - name:       fixed_dt
    label:      dt
    frame:      frame_time
    inputtype:  float
    defaultval: 0.25
    outputdef:
      AMR-Wind: time.fixed_dt

  - name:       cfl
    label:      cfl
    frame:      frame_time
    inputtype:  float
    defaultval: 0.95
    outputdef:
      AMR-Wind: time.cfl

  - name:       physics
    label:      Simulation type
    tab:        Simulation
    inputtype:  listbox
    optionlist: [FreeStream, ABL, RayleighTaylor, BoussinesqBubble, TaylorGreenVortex]
    defaultval: ABL
    listboxopt:
      selectmode: multiple
    outputdef:
      AMR-Wind: incflo.physics

  # ========== Mesh and Domain inputs =========================
  - name:       prob_lo
    label:      "Domain corner 1"
    frame:      frame_Mesh
    inputtype:  [float, float, float] 
    defaultval: [0.0, 0.0, 0.0]
    outputdef:
      AMR-Wind: geometry.prob_lo

  - name:       prob_hi
    label:      "Domain corner 2"
    frame:      frame_Mesh
    inputtype:  [float, float, float] 
    defaultval: [1000.0, 1000.0, 1000.0]
    outputdef:
      AMR-Wind: geometry.prob_hi

  - name:       n_cell
    label:      "Mesh size"
    frame:      frame_Mesh
    inputtype:  [int, int, int] 
    defaultval: [48, 48, 48]
    outputdef:
      AMR-Wind: amr.n_cell

  - name:       is_periodicx
    label:      "Periodic in X"
    frame:      frame_BC
    inputtype:  bool
    defaultval: 1
    ctrlelem:
      - frame:      frame_xBC
        activewhen: ['', 0]

  - name:       is_periodicy
    label:      "Periodic in Y"
    frame:      frame_BC
    inputtype:  bool
    defaultval: 1
    ctrlelem:
      - frame:      frame_yBC
        activewhen: ['', 0]

  - name:       is_periodicz
    label:      "Periodic in Z"
    frame:      frame_BC
    inputtype:  bool
    defaultval: 0
    ctrlelem:
      - frame:      frame_zBC
        activewhen: ['', 0]

  - name:       isperiodic
    label:    
    frame:      frame_BC
    inputtype:  mergedboollist
    mergedboollist:
      - ['is_periodicx', '1', '0']
      - ['is_periodicy', '1', '0']      
      - ['is_periodicz', '1', '0']
    outputdef:
      AMR-Wind: geometry.is_periodic

  - name:       plot_chooseview
    label:      "Choose plot view"
    tab:        Domain
    row:        6
    inputtype:  str
    optionlist: ['XY', 'XZ', 'YZ']
    defaultval: 'XY'

  - name:       xlo_type
    label:      "Lower X velocity BC"
    frame:      frame_xBC
    inputtype:  str
    optionlist: *bctypes
    defaultval: no_slip_wall
    outputdef:
      AMR-Wind: xlo.type

  - name:       xhi_type
    label:      "Upper X velocity BC"
    frame:      frame_xBC
    inputtype:  str
    optionlist: *bctypes
    defaultval: no_slip_wall
    outputdef:
      AMR-Wind: xhi.type

  - name:       ylo_type
    label:      "Lower Y velocity BC"
    frame:      frame_yBC
    inputtype:  str
    optionlist: *bctypes
    defaultval: no_slip_wall
    outputdef:
      AMR-Wind: ylo.type

  - name:       yhi_type
    label:      "Upper Y velocity BC"
    frame:      frame_yBC
    inputtype:  str
    optionlist: *bctypes
    defaultval: no_slip_wall
    outputdef:
      AMR-Wind: yhi.type

  - name:       zlo_type
    label:      "Lower Z velocity BC"
    frame:      frame_zBC
    inputtype:  str
    optionlist: *bctypes
    defaultval: no_slip_wall
    outputdef:
      AMR-Wind: zlo.type

  - name:       zhi_type
    label:      "Upper Z velocity BC"
    frame:      frame_zBC
    inputtype:  str
    optionlist: *bctypes
    defaultval: no_slip_wall
    outputdef:
      AMR-Wind: zhi.type

  # ============================================================
  # ========== ABL forcing selection ==========================
  - name:       ABLForcing
    label:      add ABL Forcing
    frame:      frame_ABLforcing
    inputtype:  bool
    defaultval: 1
    ctrlelem:  
      - frame:   frame_ABL

  - name:       CoriolisForcing
    label:      add Coriolis forces
    frame:      frame_ABLforcing
    inputtype:  bool
    defaultval: 1
    ctrlelem:  
      - frame:  frame_Coriolis

  - name:       BoussinesqForcing
    label:      add Boussinesq forcing
    frame:      frame_ABLforcing
    inputtype:  bool
    defaultval: 1
    ctrlelem:  
      - frame:  frame_Boussinesq

  - name:       ICNS_source_terms
    label:    
    frame:      frame_ABLforcing
    inputtype:  mergedboollist
    mergedboollist:
      - ['ABLForcing',        'ABLForcing',          ' ']
      - ['BoussinesqForcing', 'BoussinesqBuoyancy ', ' ']    
      - ['CoriolisForcing',   'CoriolisForcing',     ' ']

    outputdef:
      AMR-Wind: ICS.source_terms

  # ========== ABL specification ==============================
  - name:       ABL_velocity
    label:      Wind vector
    frame:      frame_ABL
    inputtype:  [float, float, float] 
    defaultval: [10.0, 0.0, 0.0]
    outputdef:
      AMR-Wind: incflo.velocity

  - name:       forcing_height
    label:      Forcing height
    frame:      frame_ABL
    inputtype:  float
    defaultval: 0.0
    outputdef:
      AMR-Wind: ABLForcing.abl_forcing_height


  - name:       latitude
    label:      Latitude
    frame:      frame_Coriolis
    inputtype:  float
    defaultval: 0.0
    outputdef:
      AMR-Wind: CoriolisForcing.latitude

  - name:       rotational_time_period
    label:      Rotation period
    frame:      frame_Coriolis
    inputtype:  float
    defaultval: 86164.0900027328
    outputdef:
      AMR-Wind: CoriolisForcing.rotational_time_period

  - name:       north_vector
    label:      North direction
    frame:      frame_Coriolis
    inputtype:  [float, float, float] 
    defaultval: [0.0, 1.0, 0.0]
    outputdef:
      AMR-Wind: CoriolisForcing.north_vector

  - name:       east_vector
    label:      East direction
    frame:      frame_Coriolis
    inputtype:  [float, float, float] 
    defaultval: [1.0, 0.0, 0.0]
    outputdef:
      AMR-Wind: CoriolisForcing.east_vector

  - name:       boussinesq_reference_temperature
    label:      Reference Temperature
    frame:      frame_Boussinesq
    inputtype:  float
    defaultval: 300.0
    outputdef:
      AMR-Wind: BoussinesqBuoyancy.reference_temperature 

  # =========== Junk stuff here ========================
  - name: input_3
    label: "list of options"
    tab:  Junk
    inputtype: str
    optionlist: ['optionA', 'optionB']
    defaultval: 'optionA'

  - name: label1
    label: "This is some label"
    labelonly: True
    tab:  Junk

  - name: label2
    label: "Some more helpful advice"
    labelonly: True
    tab:  Junk

buttons:
  - name: exitbutton
    text: Exit
    tab:  Junk
    row:  9
    command: self.quit

  - name: plotdomain
    text: Plot Domain
    row:  6
    col:  2
    tab:  Domain
    command: self.plotDomain

  - name: plotdomain
    text: Plot Domain
    tab:  ABL
    command: self.plotDomain

  - name: pullvars
    text: pull vars
    tab:  Junk
    command: "partial(pullvals, self.inputvars, statuslabel=self.statusbar)"

  - name: writeInput
    text: write input file
    tab:  Junk
    command: self.writeAMRWindInput
    #command: "partial(self.getDictFromInputs, \"AMR-Wind\")"
