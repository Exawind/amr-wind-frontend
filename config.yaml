tabs:
  - Simulation
  - Domain
  - ABL
  - Refinement
  - Turbines
  - IO
  - Postpro
  - Expert

frames:
  # ==== Simulation frames ==== 
  - name:  frame_time
    tab:   Simulation
    row:   2
    title: Time control
  - name:  frame_restart
    tab:   Simulation
    row:   3
    title: Restart parameters
  - name:  frame_godunov
    tab:   Simulation
    row:   4
    title: Godunov parameters
  - name:  frame_incflo
    tab:   Simulation
    row:   5
    title: Fluid and transport properties
  - name:  frame_constants
    tab:   Simulation
    row:   6
    title: Constant values
  - name:  frame_turbulence
    tab:   Simulation
    row:   7
    title: Turbulence parameters
  - name:  frame_tolerances
    tab:   Expert
    #row:   7
    title: Tolerances
  # ==== Domain frames ==== 
  - name:  frame_Mesh
    tab:   Domain
    #row:   0
    title: Domain and Mesh
  - name:  frame_BC
    tab:   Domain
    title: Boundary conditions
  - name:  frame_xBC
    tab:   Domain
    title: X Boundary conditions
  - name:  frame_yBC
    tab:   Domain
    title: Y Boundary conditions
  - name:  frame_zBC
    tab:   Domain
    title: Z Boundary conditions

  # ==== ABL frames ==== 
  - name:  frame_ABLforcing
    tab:   ABL
    row:   1
    title: ABL forcing
  - name:  frame_ABLphysics
    tab:   ABL
    title: ABL physics
  - name:  frame_ABLprop
    tab:   ABL
    title: ABL properties
  - name:  frame_Coriolis
    tab:   ABL
    title: Coriolis forces
  - name:  frame_Boussinesq
    tab:   ABL
    title: Boussinesq forces
  - name:  frame_ABLTprof
    tab:   ABL
    title: ABL temperature profiles
  - name:  frame_ABLpeturb
    tab:   ABL
    title: ABL perturbations
  - name:  frame_ABLoutput
    tab:   ABL
    title: ABL output parameters
  - name:  frame_ABLboundaryplane
    tab:   ABL
    title: ABL Boundary Plane
    row:   10

  # ==== IO frames ==== 
  - name:  frame_IOplotting
    tab:   IO
    row:   1
    title: Plot outputs
  - name:  frame_IOsampling
    tab:   IO
    row:   4
    title: Sampling probes

  # ==== Refinement frames ==== 
  - name:  frame_refinement
    tab:   Refinement
    row:   1
    title: Nested refinement parameters

  # ==== Postprocessing frames ==== 
  - name:  frame_postproABL
    tab:   Postpro
    row:   1
    title: ABL Postprocessing
  - name:  frame_postprosampling
    tab:   Postpro
    row:   2
    title: Plot Sample Planes

  # ==== Turbine frames ==== 
  - name:  frame_turbineglobals
    tab:   Turbines
    row:   1
    title: Turbine parameters


predefinedlists:
  # Check amr-wind/incflo_enums.H
  bctypes: &bctypes [pressure_inflow, pressure_outflow, mass_inflow, zero_gradient,  no_slip_wall, slip_wall, wall_model, fixed_gradient]
  turbinetypes: &turbinetypes [TurbineFastLine, FlatPlateLine]

# *********** INPUTWIDGET FORMAT ****************
# 
#  Specify each input widget
#
# - name:       NAME         # Name of variable [required]
#   label:      SOME TEXT    # displayed label in GUI [optional]
#   tab:        TABNAME      # Which tab to put widget 
#   frame:      FRAMENAME    # Which frame to put widget
#                            #  either tab or frame must be specified
#   row:        ROWNUM       # which row to put widget [optional]
#   inputtype:  float        # Type of input [required]
#                            #  Types available: 
#                            #  float/int/bool/str/filename/listbox
#   defaultval: 100.0        # default value [optional]
#   visible:    True         # if false, make invisible [optional,default:True] 
#   optionlist: [var1, var2, ..]
#   fileopenopt:             # options for filename [optional]
#     selecttype: open       # open/saveas/directory [optional]
#     kwargs:                # Optional arguments to tkinter.filedialog
#       filetypes: 
#       - ["FAST out files", "*.out"]
#       - ["all files", "*.*"]
#   outputdef:
#     AMR-Wind: time.stop_time
# ***********************************************

inputwidgets:
  # ========== Simulation inputs ==============================
  - name:       comment_simtimectrl
    frame:      frame_time
    inputtype:  str
    defaultval: "# --- Simulation time control parameters ---"
    visible:    False
    outputdef:
      AMR-Wind: '#comment_simtimectrl'

  - name:       stop_time
    label:      Max time
    frame:      frame_time
    inputtype:  float
    defaultval: 100.0
    outputdef:
      AMR-Wind: time.stop_time
      help:     Max (simulated) time to evolve

  - name:       max_step
    label:      Max steps
    frame:      frame_time
    inputtype:  int
    defaultval: -1
    outputdef:
      AMR-Wind: time.max_step

  - name:       fixed_dt
    label:      dt
    frame:      frame_time
    inputtype:  float
    defaultval: 0.25
    outputdef:
      AMR-Wind: time.fixed_dt

  - name:       cfl
    label:      cfl
    frame:      frame_time
    inputtype:  float
    defaultval: 0.95
    outputdef:
      AMR-Wind: time.cfl

  - name:       checkpoint_interval
    label:      checkpoint interval
    frame:      frame_restart
    inputtype:  int
    defaultval: #10000
    outputdef:
      AMR-Wind: time.checkpoint_interval

  - name:       physics
    label:      Simulation type
    tab:        Simulation
    row:        1
    inputtype:  listbox
    optionlist: [FreeStream, ABL, RayleighTaylor, BoussinesqBubble, TaylorGreenVortex, Actuator]
    #defaultval: ABL
    listboxopt:
      selectmode: multiple
    outputdef:
      AMR-Wind: incflo.physics
  # ---------- Restart parameters -----------------------------
  - name:       verbose
    label:      Verbosity
    frame:      frame_IOplotting
    inputtype:  int
    defaultval: 0
    outputdef:
      AMR-Wind: incflo.verbose

  - name:       check_file
    label:      Check file
    frame:      frame_restart
    inputtype:  str
    defaultval: chk
    outputdef:
      AMR-Wind: io.check_file
      
  - name:       restart_file
    label:      Restart file
    frame:      frame_restart
    inputtype:  filename
    defaultval: 
    outputdef:
      AMR-Wind: io.restart_file

  # ---------- Godunov parameters -----------------------------
  - name:       use_godunov
    label:      Use godunov
    frame:      frame_godunov
    inputtype:  bool
    defaultval: 1
    ctrlelem:
      - input:  godunov_type
    outputdef:
      AMR-Wind: incflo.use_godunov

  - name:       godunov_type
    label:      Godunov type
    frame:      frame_godunov
    inputtype:  str
    optionlist: [ppm, ppm_nolim, weno]
    defaultval: ppm
    outputdef:
      AMR-Wind: incflo.godunov_type

  # ---------- Turbulence parameters --------------------------
  - name:       turbulence_model
    label:      Turbulence model
    frame:      frame_turbulence
    inputtype:  listbox
    optionlist: [Laminar, OneEqKsgsM84, Smagorinsky]
    defaultval: 
    outputdef:
      AMR-Wind: turbulence.model
    ctrlelem:
      - input:  TKE_source_terms
        activewhen: ['OneEqKsgsM84', 1]
      - input:  SmagorinskyCs
        activewhen: ['Smagorinsky', 1]

  - name:       TKE_source_terms
    label:      TKE source terms
    frame:      frame_turbulence
    inputtype:  listbox
    optionlist: [KsgsM84Src]
    outputdef:
      AMR-Wind: TKE.source_terms

  - name:       SmagorinskyCs
    label:      Smagorinsky Cs
    frame:      frame_turbulence
    inputtype:  float
    defaultval: 0.135
    outputdef:
      AMR-Wind: Smagorinsky_coeffs.Cs
  # ---------- Tolerance parameters --------------------------
  - name:       nodal_proj.mg_rtol
    label:      nodal_proj.mg_rtol
    frame:      frame_tolerances
    inputtype:  float
    outputdef:
      AMR-Wind: nodal_proj.mg_rtol

  - name:       nodal_proj.mg_atol
    label:      nodal_proj.mg_atol
    frame:      frame_tolerances
    inputtype:  float
    outputdef:
      AMR-Wind: nodal_proj.mg_atol

  - name:       mac_proj.mg_rtol
    label:      mac_proj.mg_rtol
    frame:      frame_tolerances
    inputtype:  float
    outputdef:
      AMR-Wind: mac_proj.mg_rtol

  - name:       mac_proj.mg_atol
    label:      mac_proj.mg_atol
    frame:      frame_tolerances
    inputtype:  float
    outputdef:
      AMR-Wind: mac_proj.mg_atol

  - name:       diffusion.mg_rtol
    label:      diffusion.mg_rtol
    frame:      frame_tolerances
    inputtype:  float
    outputdef:
      AMR-Wind: diffusion.mg_rtol

  - name:       diffusion.mg_atol
    label:      diffusion.mg_atol
    frame:      frame_tolerances
    inputtype:  float
    outputdef:
      AMR-Wind: diffusion.mg_atol

  - name:       temperature_diffusion.mg_rtol
    label:      temperature_diffusion.mg_rtol
    frame:      frame_tolerances
    inputtype:  float
    outputdef:
      AMR-Wind: temperature_diffusion.mg_rtol

  - name:       temperature_diffusion.mg_atol
    label:      temperature_diffusion.mg_atol
    frame:      frame_tolerances
    inputtype:  float
    outputdef:
      AMR-Wind: temperature_diffusion.mg_atol

  # ---------- incflo fluid properties ------------------------
  - name:       gravity
    label:      gravity
    frame:      frame_incflo
    inputtype:  [float, float, float]
    defaultval: [0.0, 0.0, -9.81]
    outputdef:
      AMR-Wind: incflo.gravity

  - name:       density
    label:      density
    frame:      frame_incflo
    inputtype:  float
    defaultval: 1.00
    outputdef:
      AMR-Wind: incflo.density

  - name:       viscosity
    label:      viscosity
    frame:      frame_incflo
    inputtype:  float
    defaultval: 1.872e-5
    outputdef:
      AMR-Wind: transport.viscosity

  - name:       laminar_prandtl
    label:      Laminar prandtl
    frame:      frame_incflo
    inputtype:  float
    defaultval: 0.7
    outputdef:
      AMR-Wind: transport.laminar_prandtl

  - name:       turbulent_prandtl
    label:      Turb. prandtl
    frame:      frame_incflo
    inputtype:  float
    defaultval: 0.3333
    outputdef:
      AMR-Wind: transport.turbulent_prandtl

  # ---------- Constant values --------------------------------
  - name:       ConstValue_density
    label:      Constant density
    frame:      frame_constants
    inputtype:  float
    #defaultval: 0.3333
    outputdef:
      AMR-Wind: ConstValue.density.value

  - name:       ConstValue_velocity
    label:      Constant velocity
    frame:      frame_constants
    inputtype:  [float, float, float]
    #defaultval: 0.3333
    outputdef:
      AMR-Wind: ConstValue.velocity.value  

  # ========== Mesh and Domain inputs =========================
  - name:       comment_geommesh
    frame:      frame_Mesh
    inputtype:  str
    defaultval: "\n# --- Geometry and Mesh ---"
    visible:    False
    outputdef:
      AMR-Wind: '#comment_geommesh'

  - name:       prob_lo
    label:      "Domain corner 1"
    frame:      frame_Mesh
    inputtype:  [float, float, float] 
    defaultval: [0.0, 0.0, 0.0]
    outputdef:
      AMR-Wind: geometry.prob_lo

  - name:       prob_hi
    label:      "Domain corner 2"
    frame:      frame_Mesh
    inputtype:  [float, float, float] 
    defaultval: [1000.0, 1000.0, 1000.0]
    outputdef:
      AMR-Wind: geometry.prob_hi

  - name:       n_cell
    label:      "Mesh size"
    frame:      frame_Mesh
    inputtype:  [int, int, int] 
    defaultval: [48, 48, 48]
    outputdef:
      AMR-Wind: amr.n_cell

  - name:       max_level
    label:      Max refinement level
    frame:      frame_refinement #frame_Mesh
    inputtype:  int
    defaultval: 0
    outputdef:
      AMR-Wind: amr.max_level

  - name:       is_periodicx
    label:      "Periodic in X"
    frame:      frame_BC
    inputtype:  bool
    defaultval: 1
    ctrlelem:
      - frame:      frame_xBC
        activewhen: ['', 0]

  - name:       is_periodicy
    label:      "Periodic in Y"
    frame:      frame_BC
    inputtype:  bool
    defaultval: 1
    ctrlelem:
      - frame:      frame_yBC
        activewhen: ['', 0]

  - name:       is_periodicz
    label:      "Periodic in Z"
    frame:      frame_BC
    inputtype:  bool
    defaultval: 0
    ctrlelem:
      - frame:      frame_zBC
        activewhen: ['', 0]

  - name:       isperiodic
    label:    
    frame:      frame_BC
    inputtype:  mergedboollist
    mergedboollist:
      - ['is_periodicx', '1', '0']
      - ['is_periodicy', '1', '0']      
      - ['is_periodicz', '1', '0']
    outputdef:
      AMR-Wind: geometry.is_periodic

  - name:       xlo_type
    label:      "Lower X velocity BC"
    frame:      frame_xBC
    inputtype:  str
    optionlist: *bctypes
    defaultval: no_slip_wall
    outputdef:
      AMR-Wind: xlo.type

  - name:       xlo_temperature_type
    label:      "Lower X temp BC"
    frame:      frame_xBC
    inputtype:  str
    optionlist: *bctypes
    #defaultval: wall_model
    outputdef:
      AMR-Wind: xlo.temperature_type

  - name:       xlo_density
    label:      "Lower X density"
    frame:      frame_xBC
    inputtype:  float
    outputdef:
      AMR-Wind: xlo.density

  - name:       xlo_velocity
    label:      "Lower X velocity"
    frame:      frame_xBC
    inputtype:  [float, float, float]
    outputdef:
      AMR-Wind: xlo.velocity

  - name:       xlo_temperature
    label:      "Lower X temperature"
    frame:      frame_xBC
    inputtype:  float
    outputdef:
      AMR-Wind: xlo.temperature

  - name:       xlo_tke_type
    label:      "Lower X TKE BC"
    frame:      frame_xBC
    inputtype:  str
    optionlist: *bctypes
    defaultval: #None
    outputdef:
      AMR-Wind: xlo.tke_type

  - name:       xhi_type
    label:      "Upper X velocity BC"
    frame:      frame_xBC
    inputtype:  str
    optionlist: *bctypes
    defaultval: no_slip_wall
    outputdef:
      AMR-Wind: xhi.type

  - name:       xhi_temperature_type
    label:      "Upper X temp BC"
    frame:      frame_xBC
    inputtype:  str
    optionlist: *bctypes
    #defaultval: fixed_gradient
    outputdef:
      AMR-Wind: xhi.temperature_type

  - name:       xhi_density
    label:      "Upper X density"
    frame:      frame_xBC
    inputtype:  float
    outputdef:
      AMR-Wind: xhi.density

  - name:       xhi_velocity
    label:      "Upper X velocity"
    frame:      frame_xBC
    inputtype:  [float, float, float]
    outputdef:
      AMR-Wind: xhi.velocity

  - name:       xhi_temperature
    label:      "Upper X temperature"
    frame:      frame_xBC
    inputtype:  float
    outputdef:
      AMR-Wind: xhi.temperature

  - name:       xhi_tke_type
    label:      "Upper X TKE BC"
    frame:      frame_xBC
    inputtype:  str
    optionlist: *bctypes
    defaultval: #None
    outputdef:
      AMR-Wind: xhi.tke_type

  - name:       ylo_type
    label:      "Lower Y velocity BC"
    frame:      frame_yBC
    inputtype:  str
    optionlist: *bctypes
    defaultval: no_slip_wall
    outputdef:
      AMR-Wind: ylo.type

  - name:       ylo_temperature_type
    label:      "Lower Y temp BC"
    frame:      frame_yBC
    inputtype:  str
    optionlist: *bctypes
    defaultval: wall_model
    outputdef:
      AMR-Wind: ylo.temperature_type

  - name:       ylo_density
    label:      "Lower Y density"
    frame:      frame_yBC
    inputtype:  float
    outputdef:
      AMR-Wind: ylo.density

  - name:       ylo_velocity
    label:      "Lower Y velocity"
    frame:      frame_yBC
    inputtype:  [float, float, float]
    outputdef:
      AMR-Wind: ylo.velocity

  - name:       ylo_temperature
    label:      "Lower Y temperature"
    frame:      frame_yBC
    inputtype:  float
    outputdef:
      AMR-Wind: ylo.temperature

  - name:       ylo_tke_type
    label:      "Lower Y TKE BC"
    frame:      frame_yBC
    inputtype:  str
    optionlist: *bctypes
    defaultval: #None
    outputdef:
      AMR-Wind: ylo.tke_type

  - name:       yhi_type
    label:      "Upper Y velocity BC"
    frame:      frame_yBC
    inputtype:  str
    optionlist: *bctypes
    defaultval: no_slip_wall
    outputdef:
      AMR-Wind: yhi.type

  - name:       yhi_temperature_type
    label:      "Upper Y temp BC"
    frame:      frame_yBC
    inputtype:  str
    optionlist: *bctypes
    defaultval: fixed_gradient
    outputdef:
      AMR-Wind: yhi.temperature_type

  - name:       yhi_density
    label:      "Upper Y density"
    frame:      frame_yBC
    inputtype:  float
    outputdef:
      AMR-Wind: yhi.density

  - name:       yhi_velocity
    label:      "Upper Y velocity"
    frame:      frame_yBC
    inputtype:  [float, float, float]
    outputdef:
      AMR-Wind: yhi.velocity

  - name:       yhi_temperature
    label:      "Upper Y temperature"
    frame:      frame_yBC
    inputtype:  float
    outputdef:
      AMR-Wind: yhi.temperature

  - name:       yhi_tke_type
    label:      "Upper Y TKE BC"
    frame:      frame_yBC
    inputtype:  str
    optionlist: *bctypes
    defaultval: #None
    outputdef:
      AMR-Wind: yhi.tke_type

  - name:       zlo_type
    label:      "Lower Z velocity BC"
    frame:      frame_zBC
    inputtype:  str
    optionlist: *bctypes
    defaultval: no_slip_wall
    outputdef:
      AMR-Wind: zlo.type

  - name:       zlo_temperature_type
    label:      "Lower Z temp BC"
    frame:      frame_zBC
    inputtype:  str
    optionlist: *bctypes
    defaultval: #wall_model
    outputdef:
      AMR-Wind: zlo.temperature_type

  - name:       zlo_density
    label:      "Lower Z density"
    frame:      frame_zBC
    inputtype:  float
    outputdef:
      AMR-Wind: zlo.density

  - name:       zlo_velocity
    label:      "Lower Z velocity"
    frame:      frame_zBC
    inputtype:  [float, float, float]
    outputdef:
      AMR-Wind: zlo.velocity

  - name:       zlo_temperature
    label:      "Lower Z temperature"
    frame:      frame_zBC
    inputtype:  float
    outputdef:
      AMR-Wind: zlo.temperature

  - name:       zlo_tke_type
    label:      "Lower Z TKE BC"
    frame:      frame_zBC
    inputtype:  str
    optionlist: *bctypes
    defaultval: #slip_wall
    outputdef:
      AMR-Wind: zlo.tke_type

  - name:       zhi_type
    label:      "Upper Z velocity BC"
    frame:      frame_zBC
    inputtype:  str
    optionlist: *bctypes
    defaultval: no_slip_wall
    outputdef:
      AMR-Wind: zhi.type

  - name:       zhi_temperature_type
    label:      "Upper Z temp BC"
    frame:      frame_zBC
    inputtype:  str
    optionlist: *bctypes
    defaultval: #fixed_gradient
    outputdef:
      AMR-Wind: zhi.temperature_type

  - name:       zhi_density
    label:      "Upper Z density"
    frame:      frame_zBC
    inputtype:  float
    outputdef:
      AMR-Wind: zhi.density

  - name:       zhi_velocity
    label:      "Upper Z velocity"
    frame:      frame_zBC
    inputtype:  [float, float, float]
    outputdef:
      AMR-Wind: zhi.velocity

  - name:       zhi_temperature
    label:      "Upper Z temperature"
    frame:      frame_zBC
    inputtype:  float
    outputdef:
      AMR-Wind: zhi.temperature

  - name:       zhi_tke_type
    label:      "Upper Z TKE BC"
    frame:      frame_zBC
    inputtype:  str
    optionlist: *bctypes
    defaultval: #slip_wall
    outputdef:
      AMR-Wind: zhi.tke_type

  # ============================================================
  # ========== ABL forcing selection ==========================
  - name:       comment_ablparams
    frame:      frame_ABLforcing
    inputtype:  str
    defaultval: "\n# --- ABL parameters ---"
    visible:    False
    outputdef:
      AMR-Wind: '#comment_ablparams'

  - name:       ABLForcing
    label:      add ABL Forcing
    frame:      frame_ABLforcing
    inputtype:  bool
    defaultval: 1
    ctrlelem:  
      - frame:   frame_ABLphysics

  - name:       CoriolisForcing
    label:      add Coriolis forces
    frame:      frame_ABLforcing
    inputtype:  bool
    defaultval: 1
    ctrlelem:  
      - frame:  frame_Coriolis

  - name:       BoussinesqForcing
    label:      add Boussinesq forcing
    frame:      frame_ABLforcing
    inputtype:  bool
    defaultval: 1
    ctrlelem:  
      - frame:  frame_Boussinesq

  - name:       ICNS_source_terms
    label:    
    frame:      frame_ABLforcing
    inputtype:  mergedboollist
    mergedboollist:
      - ['ABLForcing',        'ABLForcing',          '']
      - ['BoussinesqForcing', 'BoussinesqBuoyancy',  '']    
      - ['CoriolisForcing',   'CoriolisForcing',     '']
      - ['ActuatorForcing',   'ActuatorForcing',     '']
    outputdef:
      AMR-Wind: ICNS.source_terms

  # ========== ABL output parameters ==========================
  - name:       ABL_stats_output_frequency
    label:      Output frequency
    frame:      frame_ABLoutput
    inputtype:  int
    defaultval: 2
    outputdef:
      AMR-Wind: ABL.stats_output_frequency

  - name:       ABL_stats_output_format
    label:      Output format
    frame:      frame_ABLoutput
    inputtype:  str
    optionlist: [netcdf]
    defaultval: netcdf
    outputdef:
      AMR-Wind: ABL.stats_output_format

  # ========== ABL output parameters ==========================
  - name:       ABL_useboundaryplane
    label:      Use boundary plane I/O
    tab:        ABL
    row:        9
    inputtype:  bool
    ctrlelem:
      - frame:      frame_ABLboundaryplane
        activewhen: ['', 1]

  - name:       ABL_bndry_io_mode
    label:      Boundary plane IO mode
    frame:      frame_ABLboundaryplane
    inputtype:  str
    optionlist: [0, 1]
    defaultval: -1
    outputdef:
      AMR-Wind: ABL.bndry_io_mode

  - name:       ABL_bndry_file
    label:      Boundary file
    frame:      frame_ABLboundaryplane
    inputtype:  filename
    outputdef:
      AMR-Wind: ABL.bndry_file

  - name:       ABL_bndry_planes
    label:      Boundary planes
    frame:      frame_ABLboundaryplane
    inputtype:  listbox
    optionlist: [xlo, ylo]
    listboxopt:
      selectmode: multiple
      height:   2
    outputdef:
     AMR-Wind:  ABL.bndry_planes

  - name:       ABL_bndry_output_start_time
    label:      Output start time
    frame:      frame_ABLboundaryplane
    inputtype:  float
    outputdef:
     AMR-Wind:  ABL.bndry_output_start_time

  - name:       ABL_bndry_var_names
    label:      Output variables
    frame:      frame_ABLboundaryplane
    inputtype:  str
    defaultval: velocity temperature
    outputdef:
     AMR-Wind:  ABL.bndry_var_names

  # ========== ABL specification ==============================
  - name:       ABL_velocity
    label:      Wind vector
    frame:      frame_ABLphysics
    inputtype:  [float, float, float] 
    defaultval: [10.0, 0.0, 0.0]
    outputdef:
      AMR-Wind: incflo.velocity

  - name:       useWSDir
    label:      Use speed & dir instead
    frame:      frame_ABLphysics
    inputtype:  bool
    defaultval: 0
    ctrlelem:
      - input:  ABL_windspeed
      - input:  ABL_winddir
      - input:  ABL_velocity
        activewhen: ['', 0]

  - name:       ABL_windspeed
    label:      Wind speed
    frame:      frame_ABLphysics
    inputtype:  float    

  - name:       ABL_winddir
    label:      Wind direction
    frame:      frame_ABLphysics
    inputtype:  float

  - name:       forcing_height
    label:      Forcing height
    frame:      frame_ABLphysics
    inputtype:  float
    defaultval: 0.0
    outputdef:
      AMR-Wind: ABLForcing.abl_forcing_height

  - name:       kappa
    label:      kappa
    frame:      frame_ABLprop
    inputtype:  float
    defaultval: 0.41
    outputdef:
      AMR-Wind: ABL.kappa

  - name:       ABL_normal_direction
    label:      ABL normal direction
    frame:      frame_ABLprop
    inputtype:  int
    defaultval: 2
    outputdef:
      AMR-Wind: ABL.normal_direction

  - name:       z0
    label:      z0 roughness
    frame:      frame_ABLprop
    inputtype:  float
    defaultval: 0.0005
    outputdef:
      AMR-Wind: ABL.surface_roughness_z0

  - name:       reference_temperature
    label:      ABL ref temp
    frame:      frame_ABLprop
    inputtype:  float
    defaultval: 300.0
    outputdef:
      AMR-Wind: ABL.reference_temperature

  - name:       surface_temp_rate
    label:      surf temp rate 
    frame:      frame_ABLprop
    inputtype:  float
    defaultval: 0.0
    outputdef:
      AMR-Wind: ABL.surface_temp_rate

  - name:       latitude
    label:      Latitude
    frame:      frame_Coriolis
    inputtype:  float
    defaultval: 0.0
    outputdef:
      AMR-Wind: CoriolisForcing.latitude

  - name:       rotational_time_period
    label:      Rotation period
    frame:      frame_Coriolis
    inputtype:  float
    defaultval: 86164.0900027328
    outputdef:
      AMR-Wind: CoriolisForcing.rotational_time_period

  - name:       north_vector
    label:      North direction
    frame:      frame_Coriolis
    inputtype:  [float, float, float] 
    defaultval: [0.0, 1.0, 0.0]
    outputdef:
      AMR-Wind: CoriolisForcing.north_vector

  - name:       east_vector
    label:      East direction
    frame:      frame_Coriolis
    inputtype:  [float, float, float] 
    defaultval: [1.0, 0.0, 0.0]
    outputdef:
      AMR-Wind: CoriolisForcing.east_vector

  - name:       boussinesq_reference_temperature
    label:      Reference Temperature
    frame:      frame_Boussinesq
    inputtype:  float
    defaultval: 300.0
    outputdef:
      AMR-Wind: BoussinesqBuoyancy.reference_temperature 

  - name:       temperature_heights
    label:      Temp profile z
    frame:      frame_ABLTprof
    inputtype:  str
    #defaultval: 0.0 650.0 750.0 1000.0
    outputdef:
      AMR-Wind: ABL.temperature_heights

  - name:       temperature_values
    label:      Temp profile val
    frame:      frame_ABLTprof
    inputtype:  str
    #defaultval: 300.0 300.0 308.0 308.75 
    outputdef:
      AMR-Wind: ABL.temperature_values

  - name:       perturb_velocity
    label:      Apply vel perturbations
    frame:      frame_ABLpeturb
    inputtype:  bool
    defaultval: 1
    outputdef:
      AMR-Wind: ABL.perturb_velocity
    ctrlelem:
      - input:  perturb_ref_height
      - input:  Uperiods
      - input:  Vperiods
      - input:  deltaU
      - input:  deltaV

  - name:       perturb_ref_height
    label:      Ref z for vel perturb
    frame:      frame_ABLpeturb
    inputtype:  float
    defaultval: 50.0
    outputdef:
      AMR-Wind: ABL.perturb_ref_height

  - name:       Uperiods
    label:      Num of periods in x
    frame:      frame_ABLpeturb
    inputtype:  float
    defaultval: 4.0
    outputdef:
      AMR-Wind: ABL.Uperiods

  - name:       Vperiods
    label:      Num of periods in y
    frame:      frame_ABLpeturb
    inputtype:  float
    defaultval: 4.0
    outputdef:
      AMR-Wind: ABL.Vperiods

  - name:       deltaU
    label:      Amp. of U fluct.
    frame:      frame_ABLpeturb
    inputtype:  float
    defaultval: 1.0
    outputdef:
      AMR-Wind: ABL.deltaU

  - name:       deltaV
    label:      Amp. of V fluct.
    frame:      frame_ABLpeturb
    inputtype:  float
    defaultval: 1.0
    outputdef:
      AMR-Wind: ABL.deltaV

  - name:       perturb_temperature
    label:      Apply T perturbations
    frame:      frame_ABLpeturb
    inputtype:  bool
    defaultval: 0
    outputdef:
      AMR-Wind: ABL.perturb_temperature
    ctrlelem:
      - input:  theta_amplitude
      - input:  cutoff_height

  - name:       theta_amplitude
    label:      Amp. of T fluct.
    frame:      frame_ABLpeturb
    inputtype:  float
    defaultval: 0.8
    outputdef:
      AMR-Wind: ABL.theta_amplitude

  - name:       cutoff_height
    label:      Max T perturb height
    frame:      frame_ABLpeturb
    inputtype:  float
    defaultval: 100.0
    outputdef:
      AMR-Wind: ABL.cutoff_height

  # =========== Sampling stuff here ====================
  - name:       plot_label
    label:      Plotting inputs
    tab:        IO
    row:        0
    labelonly:  True

  - name:       plot_interval
    label:      Plot interval
    frame:      frame_IOplotting
    inputtype:  int
    defaultval: 1000
    outputdef:
      AMR-Wind: time.plot_interval

  - name:       plot_file
    label:      Plot file
    frame:      frame_IOplotting
    inputtype:  str
    defaultval: plt
    outputdef:
      AMR-Wind: io.plot_file

  - name:       KE_int
    label:      ouput KE interval
    frame:      frame_IOplotting
    inputtype:  int
    defaultval: -1
    outputdef:
      AMR-Wind: io.KE_int

  - name:       post_processing
    label:      Post processing
    tab:        IO
    row:        3
    inputtype:  listbox
    optionlist: [sampling]
#    defaultval: sampling
    listboxopt:
      selectmode: multiple
    outputdef:
      AMR-Wind: incflo.post_processing
    ctrlelem:
      - frame:  frame_IOsampling
        activewhen: ['sampling', 1]

  - name:       comment_sampling
    frame:      frame_IOsampling
    inputtype:  str
    defaultval: "\n# --- Sampling parameters ---"
    visible:    False
    outputdef:
      AMR-Wind: '#comment_sampling'

  - name:       sampling_output_frequency
    label:      Output freq
    frame:      frame_IOsampling
    inputtype:  int
    defaultval: 100
    outputdef:
      AMR-Wind: sampling.output_frequency

  - name:       sampling_fields
    label:      Variables
    frame:      frame_IOsampling
    inputtype:  listbox
    optionlist: [velocity, temperature]
    defaultval: velocity
    listboxopt:
      selectmode: multiple
    outputdef:
      AMR-Wind: sampling.fields

  # =========== Postprocessing stuff here ====================
  # ----------- ABL postprocessing -----------------
  - name:       ablstats_file
    label:      ABL Statistics file
    frame:      frame_postproABL
    row:        1
    inputtype:  filename
    fileopenopt:
      kwargs:
        filetypes: 
          - ["NETCDF files", "*.nc"]
          - ["all files", "*.*"]
  - name:       ablstats_avgt
    label:      Avg times
    frame:      frame_postproABL
    row:        4
    inputtype:  [float, float]
    defaultval: [0.0, 0.0]

  - name:       ablstats_avgz
    label:      Avg heights
    frame:      frame_postproABL
    inputtype:  str
    defaultval: 

  - name:       ablstats_profileplot
    label:      ABL Profile Stats
    frame:      frame_postproABL
    inputtype:  listbox
    optionlist: "self.parent.ABLpostpro_getprofileslist()"
    listboxopt:
      selectmode: multiple
      height:     5

  - name:       ablstats_scalarplot
    label:      ABL Scalar Stats
    frame:      frame_postproABL
    inputtype:  listbox
    optionlist: "self.parent.ABLpostpro_getscalarslist()"
    row:        8
    listboxopt:
      selectmode: multiple
      height:     5

  - name:       ablstats_reportlabel
    label:      Print ABL report
    frame:      frame_postproABL
    row:        10
    labelonly:  True

  # ----------- Sample probe postprocessing -----------------
  - name:       AlwaysFalse
    frame:      frame_postprosampling
    inputtype:  bool
    defaultval: False
    visible:    False
    ctrlelem:
      - input:  samplingprobe_timeinfolabel
        activewhen: ['', 1]
      - input:  samplingprobe_timeinfo
        activewhen: ['', 1]

  - name:       sampling_file
    label:      NetCDF file
    frame:      frame_postprosampling
    row:        1
    inputtype:  filename
    fileopenopt:
      kwargs:
        filetypes: 
          - ["NETCDF files", "*.nc"]
          - ["all files", "*.*"]

  - name:       samplingprobe_info_label
    label:      Available Data
    frame:      frame_postprosampling
    row:        3
    labelonly:  True

  - name:       samplingprobe_groups
    label:      NetCDF groups
    frame:      frame_postprosampling
    inputtype:  listbox
    optionlist: "parent.Samplepostpro_getgroups()"
    listboxopt:
      height:   4
      selectmode: multiple

  - name:       samplingprobe_variables
    label:      NetCDF vars
    frame:      frame_postprosampling
    row:        6
    inputtype:  listbox
    optionlist: "parent.Samplepostpro_getvars()"
    listboxopt:
      height:   4
      selectmode: multiple

  - name:       samplingprobe_plotaxis1
    label:      Plot axis 1
    frame:      frame_postprosampling
    inputtype:  str
    optionlist: [X, Y, Z, S]
    defaultval: S

  - name:       samplingprobe_plotaxis2
    label:      Plot axis 2
    frame:      frame_postprosampling
    inputtype:  str
    optionlist: [X, Y, Z, S]
    defaultval: S

  - name:       samplingprobe_kindex
    frame:      frame_postprosampling
    label:      k-plane
    inputtype:  int
    defaultval: 0

  - name:       samplingprobe_timeinfolabel
    label:      Times
    frame:      frame_postprosampling
    inputtype:  [str, str, str]
    defaultval: ['Start','Current','End']

  - name:       samplingprobe_timeinfo
    label:      Iter:Time
    frame:      frame_postprosampling
    inputtype:  [str, str, str]
    defaultval: 

  - name:       samplingprobe_setcurrtimelabel
    frame:      frame_postprosampling
    label:      Set current time
    labelonly:  True

  - name:       samplingprobe_plottimeindex
    frame:      frame_postprosampling
    inputtype:  int
    defaultval: 0

  # =========== Turbine stuff here ====================
  - name:       ActuatorForcing
    label:      Add turbine models
    tab:        Turbines
    row:        0
    inputtype:  bool
    defaultval: 0
    ctrlelem:  
      - frame:  frame_turbineglobals

  - name:       turbine_default_params
    label:      Default parameters
    frame:      frame_turbineglobals
    labelonly:  True

  - name:       Actuator_default_type
    label:      Actuator type
    frame:      frame_turbineglobals
    inputtype:  str
    optionlist: *turbinetypes
    defaultval: TurbineFastLine
    outputdef:
      AMR-Wind: Actuator.type
      
  - name:       Actuator_TurbineFastLine_rotor_diameter
    label:      Rotor D
    frame:      frame_turbineglobals
    inputtype:  float
    defaultval: 
    outputdef:
      AMR-Wind: Actuator.TurbineFastLine.rotor_diameter

  - name:       Actuator_TurbineFastLine_hub_height
    label:      Hub height
    frame:      frame_turbineglobals
    inputtype:  float
    defaultval: 
    outputdef:
      AMR-Wind: Actuator.TurbineFastLine.hub_height

  - name:       Actuator_TurbineFastLine_num_points_blade
    label:      Num blade points
    frame:      frame_turbineglobals
    inputtype:  int
    defaultval: 
    outputdef:
      AMR-Wind: Actuator.TurbineFastLine.num_points_blade

  - name:       Actuator_TurbineFastLine_num_points_tower
    label:      Num tower points
    frame:      frame_turbineglobals
    inputtype:  int
    defaultval: 
    outputdef:
      AMR-Wind: Actuator.TurbineFastLine.num_points_tower

  - name:       Actuator_TurbineFastLine_epsilon
    label:      Epsilon
    frame:      frame_turbineglobals
    inputtype:  [float, float, float]
    defaultval: 
    outputdef:
      AMR-Wind: Actuator.TurbineFastLine.epsilon
      
  - name:       Actuator_TurbineFastLine_epsilon_tower
    label:      Epsilon tower
    frame:      frame_turbineglobals
    inputtype:  [float, float, float]
    defaultval: 
    outputdef:
      AMR-Wind: Actuator.TurbineFastLine.epsilon_tower

  - name:       Actuator_TurbineFastLine_openfast_start_time
    label:      FAST start time
    frame:      frame_turbineglobals
    inputtype:  float
    defaultval: 
    outputdef:
      AMR-Wind: Actuator.TurbineFastLine.openfast_start_time

  - name:       Actuator_TurbineFastLine_openfast_stop_time
    label:      FAST stop time
    frame:      frame_turbineglobals
    inputtype:  float
    defaultval: 
    outputdef:
      AMR-Wind: Actuator.TurbineFastLine.openfast_stop_time

  - name:       Actuator_TurbineFastLine_nacelle_drag_coeff
    label:      Nacelle Cd
    frame:      frame_turbineglobals
    inputtype:  float
    defaultval: 
    outputdef:
      AMR-Wind: Actuator.TurbineFastLine.nacelle_drag_coeff

  - name:       Actuator_TurbineFastLine_nacelle_area
    label:      Nacelle Area
    frame:      frame_turbineglobals
    inputtype:  float
    defaultval: 
    outputdef:
      AMR-Wind: Actuator.TurbineFastLine.nacelle_area

  - name:       Actuator_TurbineFastLine_output_frequency
    label:      FAST output freq
    frame:      frame_turbineglobals
    inputtype:  int
    defaultval: 
    outputdef:
      AMR-Wind: Actuator.TurbineFastLine.output_frequency

  - name:       Actuator_TurbineFastLine_density
    label:      Density
    frame:      frame_turbineglobals
    inputtype:  float
    defaultval: 
    outputdef:
      AMR-Wind: Actuator.TurbineFastLine.density

  - name:       turbine_stuff1
    label:      
    frame:      frame_turbineglobals
    labelonly:  True

#  - name:       turbine_stuff2
#    label:      
#    frame:      frame_turbineglobals
#    labelonly:  True


  # # =========== Junk stuff here ========================
  # - name: input_3
  #   label: "list of options"
  #   tab:  Junk
  #   inputtype: str
  #   optionlist: ['optionA', 'optionB']
  #   defaultval: 'optionA'

  # - name: label1
  #   label: "This is some label"
  #   labelonly: True
  #   tab:  Junk

  # - name: label2
  #   label: "Some more helpful advice"
  #   labelonly: True
  #   tab:  Junk

buttons:
  - name:    calculateWindVector
    text:    Calc W. Vec
    frame:   frame_ABLphysics
    row:     6
    col:     1
    command: self.ABL_calculateWindVector

  - name:    calculateWindSpeedDir
    text:    Calc WS/WDir
    frame:   frame_ABLphysics
    row:     6
    col:     2
    command: self.ABL_calculateWDirWS

  - name: reloadconfig
    text: reload yaml
    tab:  Expert
    command: "self.reloadconfig"

  - name: pullvars
    text: pull vars
    tab:  Expert
    command: "partial(pullvals, self.inputvars, statuslabel=self.statusbar)"

  - name: writeInput
    text: dump input file
    tab:  Expert
    command: self.dumpAMRWindInputGUI
      #"partial(self.writeAMRWindInput, '', verbose=True)"

  - name:    loadABLstatsfile
    text:    Load file
    frame:   frame_postproABL
    row:     1
    col:     3
    command: "self.ABLpostpro_loadnetcdffile"

  - name:    plotABLstatsprofile
    text:    Plot profiles
    frame:   frame_postproABL
    row:     7
    col:     1
    command: "self.ABLpostpro_plotprofiles"

  - name:    plotABLexportprofile
    text:    Export profiles
    frame:   frame_postproABL
    row:     7
    col:     2
    command: "self.ABLpostpro_exportprofiles"

  - name:    plotABLscalars
    text:    Plot scalars
    frame:   frame_postproABL
    row:     9
    col:     1
    command: "self.ABLpostpro_plotscalars"

  - name:    printABLstatsreport
    text:    Print report
    frame:   frame_postproABL
    row:     10
    col:     1
    command: "self.ABLpostpro_printreport"

  - name:    loadSamplefile
    text:    Load file
    frame:   frame_postprosampling
    row:     1
    col:     3
    command: "self.Samplepostpro_loadnetcdffile"

  - name:    loadSamplevars
    text:    Load variables
    frame:   frame_postprosampling
    row:     5
    col:     1
    command: "self.Samplepostpro_getvars"

  - name:    Sampleprobe_prevtime
    text:    "<Prev"
    frame:   frame_postprosampling
    row:     13
    col:     0
    command: "self.Samplepostpro_getprevtime"

  - name:    Sampleprobe_nexttime
    text:    "Next>"
    frame:   frame_postprosampling
    row:     13
    col:     2
    command: "self.Samplepostpro_getnexttime"

  - name:    plotSampleprobe
    text:    Plot Sample
    frame:   frame_postprosampling
    #row:     14
    command: "self.Samplepostpro_getplot"

    
popupwindow:
  # === Plot domain window ===
  plotdomain:
    title:        Plot domain     # optional
    loadonstart:  True            # optional
    inputwidgets:
      - name:       plot_chooseview
        label:      "Choose plot view"
        inputtype:  str
        optionlist: ['XY', 'XZ', 'YZ']
        defaultval: 'XY'
      - name:       plot_windnortharrows
        label:      Plot wind & N arrows
        inputtype:  bool
        defaultval: True
      - name:       plot_sampleprobes
        label:      Plot sample probes
        inputtype:  listbox
        optionlist: "self.parent.listboxpopupwindict['listboxsampling'].getitemlist()"
        defaultval: 
        listboxopt:
          selectmode: multiple
      - name:       plot_refineboxes
        label:      Plot Refinements
        inputtype:  listbox
        optionlist: "self.parent.listboxpopupwindict['listboxtagging'].getitemlist()"
        defaultval: 
        listboxopt:
          selectmode: multiple
      - name:       plot_turbines
        label:      Plot Turbines
        inputtype:  listbox
        optionlist: "self.parent.listboxpopupwindict['listboxactuator'].getitemlist()"
        defaultval: 
        listboxopt:
          selectmode: multiple          
    buttons:
      - name: plot
        text: Plot Domain
        command: "partial(self.savethenexec, 'self.master.plotDomain()')"

  # === Plot FAST output ===
  plotfastout:
    title:        Plot FAST output # optional
    loadonstart:  True             # optional
    inputwidgets:
      - name:       plotfastout_files
        label:      FAST Files
        inputtype:  listbox
        defaultval:
        row:        1
        listboxopt:
          selectmode: multiple
          height: 5
      - name:       plotfastout_vars
        label:      Plot Variables
        inputtype:  listbox
        defaultval: 
        listboxopt:
          selectmode: multiple
          height: 10
        row: 3
      - name:         plotfastout_label
        label:        "Plot options"
        labelonly:    True
        visible:      False

    buttons:
      - name: plotfastout_addfilebutton
        text: Add file
        command: "partial(self.savethenexec, 'self.master.FAST_addoutfilesGUI(self)')"
        row:  2
      - name: plotfastout_loadbutton
        text: Load/Reload Data
        command: "partial(self.savethenexec, 'self.master.FAST_loadallfiles(self)')"
        row:  2
        col:  1
      - name: plotfastout_plotbutton
        text: Plot 
        command: "partial(self.savethenexec, 'self.master.FAST_plotoutputs(window=self)')"
        row:  4

  # === Sampling window ===
  sampling:
    title:        Sampling probe     # optional
    datakeyname:  sampling_name      # optional
    loadonstart:  False              # optional
    inputwidgets:
    - name:       sampling_label
      label:      Sampling probe input
      labelonly:  True
    - name:       sampling_name
      label:      Name 
      inputtype:  str
      defaultval: newsample
    - name:       sampling_type
      label:      Type 
      inputtype:  listbox
      optionlist: [ProbeSampler, LineSampler, PlaneSampler]
      defaultval: LineSampler
      listboxopt:
        width:    12
      outputdef:
        AMR-Wind: type
      ctrlelem:
        - input:  sampling_pf_probe_location_file
          activewhen: ['ProbeSampler', 1]
        - input:  sampling_l_num_points
          activewhen: ['LineSampler', 1]
        - input:  sampling_l_start
          activewhen: ['LineSampler', 1]
        - input:  sampling_l_end
          activewhen: ['LineSampler', 1]
        - input:  sampling_p_num_points
          activewhen: ['PlaneSampler', 1]
        - input:  sampling_p_origin
          activewhen: ['PlaneSampler', 1]
        - input:  sampling_p_axis1
          activewhen: ['PlaneSampler', 1]
        - input:  sampling_p_axis2
          activewhen: ['PlaneSampler', 1]
        - input:  sampling_p_normal
          activewhen: ['PlaneSampler', 1]
        - input:  sampling_p_offsets
          activewhen: ['PlaneSampler', 1]
    # -- sample file ---
    - name:       sampling_pf_label
      label:      Probe file specifications
      labelonly:  True
    - name:       sampling_pf_probe_location_file
      label:      Filename
      inputtype:  filename
      defaultval:
      outputdef:
        AMR-Wind: probe_location_file
    # -- sample line ---
    - name:       sampling_l_label
      label:      Line probe specifications
      labelonly:  True
    - name:       sampling_l_num_points
      label:      Line num points
      inputtype:  int
      defaultval: 2
      outputdef:
        AMR-Wind: num_points
    - name:       sampling_l_start
      label:      Line start
      inputtype:  [float, float, float]
      defaultval: [0, 0, 0]
      outputdef:
        AMR-Wind: start
    - name:       sampling_l_end
      label:      Line end
      inputtype:  [float, float, float]
      defaultval: [1, 1, 1]
      outputdef:
        AMR-Wind: end      
    # -- sample plane --
    - name:       sampling_p_label
      label:      Plane probe specifications
      labelonly:  True
    - name:       sampling_p_num_points
      label:      Plane num points
      inputtype:  [int, int]
      defaultval: [2, 2]
      outputdef:
        AMR-Wind: num_points
    - name:       sampling_p_origin
      label:      Plane origin
      inputtype:  [float, float, float]
      defaultval: [0, 0, 0]
      outputdef:
        AMR-Wind: origin
    - name:       sampling_p_axis1
      label:      Plane axis1
      inputtype:  [float, float, float]
      defaultval: [0, 0, 0]
      outputdef:
        AMR-Wind: axis1
    - name:       sampling_p_axis2
      label:      Plane axis2
      inputtype:  [float, float, float]
      defaultval: [0, 0, 0]
      outputdef:
        AMR-Wind: axis2    
    - name:       sampling_p_normal
      label:      Plane normal
      inputtype:  [float, float, float]
      defaultval: [0, 0, 0]
      outputdef:
        AMR-Wind: normal
    - name:       sampling_p_offsets
      label:      Plane offsets
      inputtype:  str
      defaultval: 0
      outputdef:
        AMR-Wind: offsets
  # === Tagging window ===
  tagging:
    title:        Refinement windows # optional
    datakeyname:  tagging_name       # optional
    loadonstart:  False              # optional
    inputwidgets:
    - name:       tagging_label
      label:      Refinement window specification
      labelonly:  True
    - name:       tagging_name
      label:      Name 
      inputtype:  str
      defaultval: newrefinement
    - name:       tagging_type
      label:      Type 
      inputtype:  listbox
      optionlist: [CartBoxRefinement, FieldRefinement, GeometryRefinement, QCriterionRefinement, VorticityRefinement]
      defaultval: CartBoxRefinement
      listboxopt:
        width:    20
      outputdef:
        AMR-Wind: type
      ctrlelem:
        - input: tagging_static_refinement_def
          activewhen: ['CartBoxRefinement', 1]
        - input: tagging_field_name
          activewhen: ['FieldRefinement', 1]
        - input: tagging_field_error
          activewhen: ['FieldRefinement', 1]
        - input: tagging_grad_error
          activewhen: ['FieldRefinement', 1]
        - input: tagging_qc_nondim
          activewhen: ['QCriterionRefinement', 1]
        - input: tagging_qc_values
          activewhen: ['QCriterionRefinement', 1]
        - input: tagging_shapes
          activewhen: ['GeometryRefinement', 1]
        - input: tagging_geom_type
          activewhen: ['GeometryRefinement', 1]
        - input: tagging_geom_origin
          activewhen: ['GeometryRefinement', 1]
        - input: tagging_geom_xaxis
          activewhen: ['GeometryRefinement', 1]
        - input: tagging_geom_yaxis
          activewhen: ['GeometryRefinement', 1]
        - input: tagging_geom_zaxis
          activewhen: ['GeometryRefinement', 1]
        - input: tagging_geom_start
          activewhen: ['GeometryRefinement', 1]
        - input: tagging_geom_end
          activewhen: ['GeometryRefinement', 1]
        - input: tagging_geom_outer_radius
          activewhen: ['GeometryRefinement', 1]
        - input: tagging_geom_inner_radius
          activewhen: ['GeometryRefinement', 1]

      # TO-DO: finish ctrlelem
    - name:       tagging_static_refinement_def
      label:      CartBox filename
      inputtype:  filename
      defaultval:
      outputdef:
        AMR-Wind: static_refinement_def
    - name:       tagging_field_name
      label:      Field name
      inputtype:  str
      defaultval:
      outputdef:
        AMR-Wind: field_name
    - name:       tagging_field_error
      label:      Field error
      inputtype:  str
      defaultval:
      outputdef:
        AMR-Wind: field_error
    - name:       tagging_grad_error
      label:      Gradient error
      inputtype:  str
      defaultval:
      outputdef:
        AMR-Wind: grad_error
    - name:       tagging_qc_nondim
      label:      Nondim Q criteria
      inputtype:  bool
      defaultval: True
      outputdef:
        AMR-Wind: nondim
    - name:       tagging_qc_values
      label:      Q criteria values
      inputtype:  str
      defaultval: 
      outputdef:
        AMR-Wind: values
    # --- Geometry tagging ---
    - name:       tagging_label_geom
      label:      Geometric shape refinement
      labelonly:  True
    - name:       tagging_shapes
      label:      Geometry Names
      inputtype:  str
      defaultval: 
      outputdef:
        AMR-Wind: shapes
    - name:       tagging_geom_level
      label:      Geometry level
      inputtype:  int
      defaultval: 
      outputdef:
        AMR-Wind: level
    - name:       tagging_geom_type
      label:      Geometry type
      inputtype:  str
      optionlist: [cylinder, box]
      defaultval: 
      outputdef:
        AMR-Wind: type
    - name:       tagging_geom_origin
      label:      Box corner
      inputtype:  [float, float, float]
      defaultval: 
      outputdef:
        AMR-Wind: origin
    - name:       tagging_geom_xaxis
      label:      Box X-axis
      inputtype:  [float, float, float]
      defaultval: 
      outputdef:
        AMR-Wind: xaxis
    - name:       tagging_geom_yaxis
      label:      Box Y-axis
      inputtype:  [float, float, float]
      defaultval: 
      outputdef:
        AMR-Wind: yaxis
    - name:       tagging_geom_zaxis
      label:      Box Z-axis
      inputtype:  [float, float, float]
      defaultval: 
      outputdef:
        AMR-Wind: zaxis
    - name:       tagging_geom_start
      label:      Cylinder start
      inputtype:  [float, float, float]
      defaultval: 
      outputdef:
        AMR-Wind: start
    - name:       tagging_geom_end
      label:      Cylinder end
      inputtype:  [float, float, float]
      defaultval: 
      outputdef:
        AMR-Wind: end
    - name:       tagging_geom_outer_radius
      label:      Cylinder Outer R
      inputtype:  float
      defaultval: 
      outputdef:
        AMR-Wind: outer_radius
    - name:       tagging_geom_inner_radius
      label:      Cylinder Inner R
      inputtype:  float
      defaultval: 
      outputdef:
        AMR-Wind: inner_radius

# === Turbine window ===
  turbine:
    title:        Actuator line      # optional
    datakeyname:  Actuator_name      # optional
    loadonstart:  False              # optional
    inputwidgets:
    - name:       actuator_label
      label:      Actuator forcing
      labelonly:  True
    - name:       Actuator_name
      label:      Name 
      inputtype:  str
      defaultval: newturbine
    - name:       Actuator_type
      label:      Actuator type
      inputtype:  str
      optionlist: *turbinetypes
      defaultval: 
      outputdef:
        AMR-Wind: type
    - name:       Actuator_openfast_input_file
      label:      OpenFAST fst file
      inputtype:  filename
      defaultval:
      outputdef:
        AMR-Wind: openfast_input_file
    - name:       Actuator_base_position
      label:      Base position
      inputtype:  [float, float, float]
      defaultval: 
      outputdef:
        AMR-Wind: base_position
    - name:       num_points_blade
      label:      Num blade points
      inputtype:  int
      defaultval: 
      outputdef:
        AMR-Wind: num_points_blade
    - name:       num_points_tower
      label:      Num tower points
      inputtype:  int
      defaultval: 
      outputdef:
        AMR-Wind: num_points_tower
    - name:       epsilon
      label:      Epsilon
      inputtype:  [float, float, float]
      defaultval: 
      outputdef:
        AMR-Wind: epsilon
    - name:       epsilon_tower
      label:      Epsilon tower
      inputtype:  [float, float, float]
      defaultval: 
      outputdef:
        AMR-Wind: epsilon_tower


        
listboxpopupwindows:
  - name:       listboxsampling
    label:      "Probes:"
    frame:      frame_IOsampling  
    #row:        0                   # optional
    popupinput: sampling             # required
    outputprefix:                    # optional
      AMR-Wind: sampling       
    outputlist:                      # optional
      AMR-Wind: labels

  - name:       listboxtagging
    label:      "Refinement zones:"
    frame:      frame_refinement
    popupinput: tagging
    outputlist:                      # optional
      AMR-Wind: labels
    outputprefix:                    # optional
      AMR-Wind: tagging

  - name:       listboxactuator
    label:      "Turbine List:"
    #tab:        Turbines
    frame:      frame_turbineglobals
    row:        16
    popupinput: turbine
    outputprefix:                    # optional
      AMR-Wind: Actuator
    outputlist:                      # optional
      AMR-Wind: labels
