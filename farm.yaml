tabs:
  - Farm

frames:
  # ==== Simulation frames ==== 
  - name:  frame_farmsetup
    tab:   Farm
    title: Wind farm setup

  - name:  frame_farmsetup1
    frame: frame_farmsetup
    title: Options
    row:   2
    kwargs:
      borderwidth: 0
    toggled: True

  - name:  frame_farmsetup1a
    frame: frame_farmsetup1
    title: User comments
    kwargs:
      borderwidth: 0

  - name:  frame_farmsetup2
    frame: frame_farmsetup
    title: Actions
    row:   3
    kwargs:
      borderwidth: 0

  - name:  frame_farmturbines
    tab:   Farm
    title: Wind farm turbine layout
    toggled: True

  - name:  frame_farmturbines1
    frame: frame_farmturbines
    title: CSV Contents
    row:   1
    kwargs:
      borderwidth: 0

  - name:  frame_farmturbines2
    frame: frame_farmturbines
    title: Layout options
    row:   2
    kwargs:
      borderwidth: 0

  - name:  frame_farmturbines3
    frame: frame_farmturbines
    title: Actions
    row:   3
    kwargs:
      borderwidth: 0

  - name:  frame_farmrefinement
    tab:   Farm
    title: Farm refinement zones
    toggled: True

  - name:  frame_farmrefinement1
    frame: frame_farmrefinement
    title: CSV Contents
    row:   1
    kwargs:
      borderwidth: 0
  - name:  frame_farmrefinement2
    frame: frame_farmrefinement
    title: Refinement options
    row:   2
    kwargs:
      borderwidth: 0
  - name:  frame_farmrefinement3
    frame: frame_farmrefinement
    title: Actions
    row:   3
    kwargs:
      borderwidth: 0

  - name:  frame_farmsampling
    tab:   Farm
    title: Farm sampling
    toggled: True

  - name:  frame_farmsampling1
    frame: frame_farmsampling
    title: CSV Contents
    row:   1
    kwargs:
      borderwidth: 0

  - name:  frame_runsweeps
    tab:   Farm
    title: Run parameter sweep
    toggled: True
      
inputwidgets:
  - name:       farm_setupfile
    frame:      frame_farmsetup
    label:      Farm setup file
    inputtype:  str #filename
    row:        1
    defaultval: ''
    entryopt:
      width:    25
    fileopenopt:
      selecttype: saveas       
      kwargs:
        filetypes: 
          - ["YAML files", "*.yaml"]
          - ["all files", "*.*"]
    outputdef:
      help:     YAML file with all farm inputs

  - name:       farm_embedamrwindinput
    frame:      frame_farmsetup1
    label:      Embed AMR-Wind input
    inputtype:  bool
    defaultval: True
    outputdef:
      help:     Embed AMR-Wind input file in yaml file

  - name:       farm_loadembedamrwindinput
    frame:      frame_farmsetup1
    label:      Loaded embeded AMR-Wind input
    inputtype:  bool
    defaultval: True
    outputdef:
      help:     Load embeded AMR-Wind input file

  - name:       farm_usercomments
    frame:      frame_farmsetup1a
    inputtype:  textbox
    defaultval: |
      Add any optional commments here.
    entryopt:
      width:    50
      height:   5
    outputdef:
      help:     "\nUser comments"
      farmsetup: farm_usercomments
      
  # -------- Turbine layout inputs -------------------
  - name:       turbines_csvtextbox
    frame:      frame_farmturbines1
    inputtype:  textbox
    defaultval: |
      # CSV file should have columns with
      # name, x, y, type, yaw, hubheight, options
    entryopt:
      width:    55
      height:   10
    outputdef:
      help:     "\nTurbine layout"
      farmsetup: turbines_csvtextbox

  - name:       turbines_csvfile
    frame:      frame_farmturbines
    label:      CSV file
    inputtype:  filename
    row:        0
    defaultval: ''
    entryopt:
      width:    25
    fileopenopt:
      kwargs:
        filetypes: 
          - ["CSV files", "*.csv"]
          - ["all files", "*.*"]
    outputdef:
      help:      CSV input file
      farmsetup: turbines_csvfile

  - name:       turbines_deleteprev
    frame:      frame_farmturbines2
    label:      Delete existing turbines
    inputtype:  bool
    defaultval: True
    outputdef:
      help:     Remove all existing turbines before adding these
      farmsetup: turbines_deleteprev

  - name:       turbines_coordsys
    frame:      frame_farmturbines2
    label:      Turbine coordinate sys
    inputtype:  str
    optionlist: ['xy', 'utm', 'latlong']
    defaultval: 'xy'
    outputdef:
      farmsetup: turbines_coordsys

  - name:       turbines_autocalccenter
    frame:      frame_farmturbines2
    label:      Auto calculate farm center
    inputtype:  bool
    defaultval: True
    ctrlelem:
      - input:  turbines_farmcenter
        activewhen: ['', 0]
    outputdef:
      help:     |
        Automatically set farm center to be average of all turbine locations
      farmsetup: turbines_autocalccenter

  - name:       turbines_farmcenter
    frame:      frame_farmturbines2
    label:      Farm center coords (X,Y)
    inputtype:  [float, float]
    #defaultval: True
    outputdef:
      farmsetup: turbines_farmcenter

  - name:       turbines_domainsize
    frame:      frame_farmturbines2
    label:      Farm domain size (X,Y,Z)
    inputtype:  [float, float, float]
    outputdef:
      help:     Size of the computational domain in meters
      farmsetup: turbines_domainsize

  - name:       turbines_plotnames
    frame:      frame_farmturbines2
    label:      Plot turbine names
    inputtype:  bool
    defaultval: True
    outputdef:
      help:     Plot the turbine names in preview window


  # -------- Refinement zone inputs -------------------
  - name:       refine_csvtextbox
    frame:      frame_farmrefinement1
    inputtype:  textbox
    defaultval: |
      # CSV file should have columns with
      # level, upstream, downstream, lateral, below, above, options
    entryopt:
      width:    55
      height:   10
    outputdef:
      help:     "\nRefine inputs"
      farmsetup: refine_csvtextbox

  - name:       refine_csvfile
    frame:      frame_farmrefinement
    label:      CSV file
    inputtype:  filename
    row:        0
    defaultval: ''
    entryopt:
      width:    25
    fileopenopt:
      kwargs:
        filetypes: 
          - ["CSV files", "*.csv"]
          - ["all files", "*.*"]
    outputdef:
      help:      CSV input file
      farmsetup: refine_csvfile

  - name:       refine_deleteprev
    frame:      frame_farmrefinement2
    label:      Delete existing zones
    inputtype:  bool
    defaultval: True
    outputdef:
      help:     Remove all existing refinement zones before adding these
      farmsetup: refine_deleteprev

  # -------- Sampling plane/probe inputs -------------------
  - name:       sampling_csvtextbox
    frame:      frame_farmsampling1
    inputtype:  textbox
    defaultval: |
      # CSV file should have columns with
      # upstream, downstream, lateral, below, above, type, options
    entryopt:
      width:    55
      height:   10
    outputdef:
      help:     "\nSampling inputs"
      farmsetup: sampling_csvtextbox

  - name:       sampling_csvfile
    frame:      frame_farmsampling
    label:      CSV file
    inputtype:  filename
    row:        0
    defaultval: ''
    entryopt:
      width:    25
    fileopenopt:
      kwargs:
        filetypes: 
          - ["CSV files", "*.csv"]
          - ["all files", "*.*"]
    outputdef:
      help:      CSV input file
      farmsetup: sampling_csvfile

  # -------- Hidden/extra inputs ---------------------------
  - name:       wfarm_embedamrwindinput
    frame:      frame_farmsampling1
    inputtype:  textbox
    visible:    False
    entryopt:
      width:    55
      height:   10
    defaultval: |
      # This should be the inputs to AMR-Wind
    outputdef:
      help:     "\n___Embedded AMR-Wind input____"
      farmsetup: wfarm_embedamrwindinput

buttons:
  - name:    farmbutton_loadturbines
    text:    Load/Reload
    frame:   frame_farmturbines
    row:     0
    col:     3
    command: "partial(self.button_loadcsv, 'turbines_csvfile', 'turbines_csvtextbox')"

  - name:    farmbutton_applyturbines
    text:    Create turbines
    frame:   frame_farmturbines3
    row:     1
    col:     0
    command: "self.turbines_createAllTurbines"

  - name:    farmbutton_previewturbines
    text:    Preview
    frame:   frame_farmturbines3
    row:     1
    col:     1
    command: "self.turbines_previewAllTurbines"


  - name:    farmbutton_loadrefine
    text:    Load/Reload
    frame:   frame_farmrefinement
    row:     0
    col:     3
    command: "partial(self.button_loadcsv, 'refine_csvfile', 'refine_csvtextbox')"

  - name:    farmbutton_applyrefine
    text:    Create refinements
    frame:   frame_farmrefinement3
    row:     1
    col:     0
    command: "self.refine_createAllZones"


  - name:    farmbutton_loadsampling
    text:    Load/Reload
    frame:   frame_farmsampling
    row:     0
    col:     3
    command: "partial(self.button_loadcsv, 'sampling_csvfile', 'sampling_csvtextbox')"

  - name:    farmbutton_clearyamlfile
    row:     1
    col:     2
    text:    Clear filename
    frame:   frame_farmsetup
    command: "self.button_clearSetupYAMLfile"

  - name:    farmbutton_saveyaml
    row:     2
    col:     0
    text:    Save YAML
    frame:   frame_farmsetup2
    command: "self.button_saveFarmSetupYAML"

  - name:    farmbutton_loadyaml
    row:     2
    col:     1
    text:    Load YAML
    frame:   frame_farmsetup2
    command: "self.button_loadFarmSetupYAML"

  - name:    farmbutton_resetsetup
    row:     2
    col:     2
    text:    Reset inputs
    frame:   frame_farmsetup2
    command: "self.resetFarmSetup"

